
<div class="dropdown-menu-header">
    <h6 class="dropdown-header">Recent Notifications</h6>
</div>
{% if notifications %}
    {% for notification in notifications %}
    <div class="dropdown-item notification-item {% if not notification.is_read %}unread{% endif %}" 
         data-notification-id="{{ notification.id }}">
        <div class="d-flex">
            <div class="notification-icon me-2">
                {% if notification.notification_type == 'booking_request' %}
                    <i class="fas fa-calendar-plus text-primary"></i>
                {% elif notification.notification_type == 'booking_confirmed' %}
                    <i class="fas fa-calendar-check text-success"></i>
                {% elif notification.notification_type == 'message_received' %}
                    <i class="fas fa-envelope text-info"></i>
                {% elif notification.notification_type == 'review_received' %}
                    <i class="fas fa-star text-warning"></i>
                {% elif notification.notification_type == 'listing_approved' %}
                    <i class="fas fa-check-circle text-success"></i>
                {% else %}
                    <i class="fas fa-bell text-secondary"></i>
                {% endif %}
            </div>
            <div class="flex-grow-1">
                <div class="notification-title small fw-bold">{{ notification.title }}</div>
                <div class="notification-message small text-muted">{{ notification.message|truncatechars:60 }}</div>
                <div class="notification-time small text-muted">{{ notification.created_at|timesince }} ago</div>
            </div>
            {% if not notification.is_read %}
                <div class="notification-dot">
                    <span class="badge bg-primary rounded-pill">&nbsp;</span>
                </div>
            {% endif %}
        </div>
    </div>
    {% endfor %}
    <div class="dropdown-divider"></div>
    <div class="dropdown-item text-center">
        <a href="{% url 'notifications:notification_list' %}" class="btn btn-sm btn-outline-primary">View All Notifications</a>
    </div>
    <div class="dropdown-item text-center">
        <button class="btn btn-sm btn-outline-secondary" onclick="markAllNotificationsRead()">Mark All Read</button>
    </div>
{% else %}
    <div class="dropdown-item text-center text-muted py-3">
        <i class="fas fa-bell-slash fa-2x mb-2"></i>
        <p class="mb-0">No notifications</p>
    </div>
{% endif %}
