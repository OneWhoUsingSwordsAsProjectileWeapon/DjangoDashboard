
{% load static %}

<!-- Complaint Button Component -->
{% if user.is_authenticated %}
    {% if complaint_type == 'listing' and listing %}
        <div class="dropdown">
            <button class="btn btn-outline-danger btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown">
                <i class="fas fa-flag"></i> Пожаловаться
            </button>
            <ul class="dropdown-menu">
                <li>
                    <a class="dropdown-item" href="{% url 'moderation:file_listing_complaint' listing.id %}">
                        <i class="fas fa-exclamation-triangle"></i> На объявление
                    </a>
                </li>
                {% if listing.host != user %}
                <li>
                    <a class="dropdown-item" href="{% url 'moderation:report_content' 'user' listing.host.id %}">
                        <i class="fas fa-user-times"></i> На пользователя
                    </a>
                </li>
                {% endif %}
            </ul>
        </div>
    {% elif complaint_type == 'booking' and booking %}
        <a href="{% url 'moderation:file_booking_complaint' booking.id %}" class="btn btn-outline-danger btn-sm">
            <i class="fas fa-flag"></i> Пожаловаться на бронирование
        </a>
    {% elif complaint_type == 'user' and target_user %}
        <a href="{% url 'moderation:report_content' 'user' target_user.id %}" class="btn btn-outline-danger btn-sm">
            <i class="fas fa-flag"></i> Пожаловаться на пользователя
        </a>
    {% endif %}
{% endif %}
